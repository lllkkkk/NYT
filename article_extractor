from urllib import request
import requests
from bs4 import BeautifulSoup

class article_extractor:

    url_from_contruct_url_function = ""

    # Using request because it handle the redirections PS : Dont use the urlib for opening URL EVER !
    request_http_data = None

    # BeautifulSoup can only use text format as input
    soup_text = None
    soup_object = None

    def set_url_soup_obj(self, url_from_api_extractor):
        self.url_from_contruct_url_function = url_from_api_extractor
        # Using request because it handle the redirections PS : Dont use the urlib for opening URL EVER !
        self.request_http_data = requests.get(url_from_api_extractor)
        # BeautifulSoup can only use text format as input
        self.soup_text = self.request_http_data.text
        self.soup_object = BeautifulSoup(self.soup_text)


# Always use requests library to handle the Redirections from the HTTP sites
    @staticmethod
    def article_extractor():
        article_data = ""
        for item in article_extractor.soup_object.findAll('p', {'class': 'story-body-text story-content'}):
            article_data = article_data +"\n\n"+ item.text
        print(article_data)

    @staticmethod
    def title_extractor():
        title_data = ""
        for item in article_extractor.soup_object.findAll('h1', {'id': 'story-heading'}):
            title_data = item.text
        print(title_data)

    def __init__(self, url_):
        self.set_url_soup_obj(url_)
        self.article_extractor()
        # self.title_extractor()


#ob = article_extractor("http://www.nytimes.com/2015/05/13/us/chicago-president-obama-library.html")
#ob.article_extractor()
# Base code DONT DELETE UNTILL PROJECT DONE
# c = request_http_data.url
# print(c)
# request_new_url = request.urlopen(urla)
# print(request_http_data)
# decoded_HTML_data = c.read().decode('utf-8')
# print(request_http_data)
# soup = BeautifulSoup(request_http_data.text)
# print(decoded_HTML_data)
# print(soup.prettify())


"""for item in soup_object.findAll('p',{'class':'story-body-text story-content'}):
    print(item)
"""


# print(soup_object.prettify())

